
public class MergeSort 
{

	public static void print(Node start)
	{
	    Node temp=start;
	    while(temp!=null)
	    {
	        System.out.print(temp.data+" ");
	        temp=temp.next;
	    }
	    System.out.println();
	}

	
	public ListNode mergeTwoLists(ListNode l1, ListNode l2)
    {
        if(l1==null && l2==null)
            return null;
            
        if(l1==null)
            return l2;
            
        if(l2==null)
            return l1;
            
        ListNode temp1=l1;
        ListNode temp2=l2;
        
        ListNode dummy=new ListNode(0);
        ListNode res=dummy;
        
        while(temp1!=null && temp2!=null)
        {
            if(temp1.val<temp2.val)
            {
                res.next=temp1;
                temp1=temp1.next;
            }
            else
            {
                res.next=temp2;
                temp2=temp2.next;
            }
            res=res.next;
        }
        
        if(temp1!=null)
        {
            res.next=temp1;
        }
        else
        {
            res.next=temp2;
        }
            
        return dummy.next;
    }
	
	public static Node mergeSort(Node start)
	{
		if(start==null || start.next==null)
			return null;

		Node slow=start;
		Node fast=start;
		Node prev=null;

		while(fast!=null && fast.next!=null)
		{
			prev=slow;
			slow=slow.next;
			fast=fast.next.next;
		}
		
		prev.next=null;
		print(start);
		Node first=mergeSort(start);
		Node second=mergeSort(slow);
		System.out.println("First");
		print(first);
		System.out.println("Second");
		print(second);


		Node res=merge(first,second);
		return res;
	}

	public static void main(String[] args) 
	{
		// TODO Auto-generated method stub

		Node A=new Node(46);
		A.next=new Node(2);
		A.next.next=new Node(3);
		A.next.next.next=new Node(1);
		A.next.next.next.next=new Node(56);
		A.next.next.next.next.next=new Node(5);
		//print(A);
		print(mergeSort(A));

	}

}




